//java

import java.util.List;
import java.util.ArrayList;
public class Main{
    static void heapify(ArrayList<Integer>arr, int n , int i){
        int l = 2*i+1;
        int r = 2*i+2;
        int largest = i;
        if(l<n && arr.get(l)>arr.get(largest)){largest = l;}
        if(r<n && arr.get(r)>arr.get(largest)){largest = r;}

        if (largest !=i){
            int t = arr.get(i);
            arr.set(i,arr.get(largest));
            arr.set(largest,t);
            heapify(arr,n,largest);
        }
    }
    static void heapSort(ArrayList<Integer> arr){
        int n = arr.size();
        for(int i = n/2-1;i>-1;i--) {
            heapify(arr,n,i);
            }
        for(int i = n-1;i>-1;i--){
            int t = arr.get(i);
            arr.set(i,arr.get(0));
            arr.set(0,t);
            heapify(arr,i,0);
            }
        }

    public static void main(String[] args){
        ArrayList<Integer> arr = new ArrayList<>(List.of(4,3,2,1));
        System.out.println(arr);
        heapSort(arr);
        System.out.println(arr);
    }
}

#python
#heap sort
def heapify(arr,i,n):
    l = 2 * i + 1
    r = 2 * i + 2

    largest= i
    if l<n and arr[l] > arr[largest]:
        largest = l
    if r<n and arr[r] > arr[largest]:
        largest = r

    if largest!=i:
        arr[largest],arr[i] = arr[i],arr[largest]
        heapify(arr,largest,n)
def heapSort(arr):
    #maxheap
    for i in range(len(arr)//2-1,-1,-1):
        heapify(arr,i,len(arr))
    #heapsort
    for i in range(len(arr)-1,-1,-1):
        arr[i],arr[0] = arr[0],arr[i]
        heapify(arr,0,i)
arr = [1,2,3,8,7,6]
heapSort(arr)
print(arr)

  
//cpp
#include<iostream>
#include<vector>
using namespace std;


void heapify(vector<int> &arr, int n , int i){
    int l = (int)(2*i+1),r = (2*i+2);
    int lv = (l < n) ? arr[l] : INT_MIN;
    int rv = (r < n) ? arr[r] : INT_MIN;
    int largest = lv>rv?(lv>arr[i]?l:i):(rv>arr[i]?r:i);

    if(largest!=i){
        int t = arr[i];
        arr[i] = arr[largest];
        arr[largest] = t;
        heapify(arr,n,largest);
    }
}
void heapSort(vector<int> &arr){
    //build max heap
    for(int i = (int)(arr.size()/2 -1);i>-1;i--){
        heapify(arr,arr.size(),i);
    }
    //heapSort
    for(int i = arr.size()-1;i>-1;i--){
        int t = arr[i];
        arr[i] = arr[0];
        arr[0] = t;
        heapify(arr,i,0);
    }
}
int main(){
    vector<int> arr = {5,4,2,6,1,8};
    heapSort(arr);
    for(int i = 0;i<arr.size();i++){
        cout<<arr[i]<<" ";
    }
    return 0;
}
